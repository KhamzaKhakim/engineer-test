# Решение тестового задания

## Описание решения

Во-первых, я создал отдельные таблицы (коллекции) для всех сущностей: City, Division, Position и Employee. Это позволяет запросы к каждой сущности независимо, а также поддерживать справочники как отдельные доменные объекты.

Во-вторых, так как сотрудников много, я денормализовал таблицу Employee: добавил cityName, divisionName и positionName прямо в записи. Так стало проще и быстрее получать сотрудников вместе с их городом, отделом и должностью без лишних запросов. При этом ссылки cityUuid, divisionUuid и positionUuid остаются, чтобы при необходимости можно было обновлять справочники и сохранять целостность данных.

Пример таблицы Employee, других таблиц можно увидеть в файле `src/db-types.ts`:

```ts
export interface Employee {
  uuid: string;
  firstName: string;
  lastName: string;
  divisionUuid: string;
  divisionName: string;
  cityUuid: string;
  cityName: string;
  positionUuid: string;
  positionName: string;
}
```

PS: В этой схеме я предположил, что большинство запросов идёт к таблице Employee, поэтому денормализовал только её. Если бы часто делались выборки по Division, можно было бы денормализовать и её.

В таблицах Employee и Division есть поле cityUuid. Судя по логике наших данных, оно почти всегда одинаковое, поэтому, скорее всего, можно убрать cityUuid из Employee.

Если же в каких-то случаях город сотрудника может отличаться от города подразделения, тогда в Employee нужно добавить divisionCityUuid и divisionCityName.

Сейчас при обновлении приходится менять данные в нескольких таблицах, но так как чтений много, а записей мало, это оптимально.

## Ответ на вопрос 3:

Если же обновлений станет больше, лучше убрать денормализованные поля и получать данные через ссылки на справочники (cityUuid, divisionUuid). Тогда чтение будет чуть медленнее, но записи — быстрее и проще.

Также можно смотреть на количество записей в таблицах и оставлять денормализацию только там, где обновления редки.

Напоследок можно сделать небольшую оптимизацию через кеширование часто используемых данных или выборку батчами, чтобы меньше нагружать базу при массовых чтениях.

## Контакты

telegram: @baatormoz

ссылка на резюме(docsend): https://docsend.com/view/m27m4tyhiz76uu5k
